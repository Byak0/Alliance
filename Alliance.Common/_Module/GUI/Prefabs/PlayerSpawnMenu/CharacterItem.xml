<Prefab>
	<Window>
		<!-- Character item -->
		<SiblingOrderWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="@Width" MarginLeft="@MarginLeft" SuggestedHeight="580" VerticalAlignment="Bottom" SiblingOrder="@SiblingOrder" >
			<Children>

				<!-- Character Select Button -->
				<MultiplayerClassLoadoutTroopSubclassButtonWidget Id="CharacterButton"
								WidthSizePolicy="Fixed"
								HeightSizePolicy="Fixed"
								SuggestedWidth="@Width"
								SuggestedHeight="580"
								DoNotPassEventsToChildren="true"
								UpdateChildrenStates="true"
								Command.Click="SelectCharacter">
					<Children>

						<!-- Character Tableau -->
						<AL_CharacterTableauWidget DataSource="{CharacterViewModel}"
														WidthSizePolicy="Fixed"
														HeightSizePolicy="Fixed"
														SuggestedWidth="800"
														SuggestedHeight="800"
														HorizontalAlignment="Center"
														VerticalAlignment="Center"

														BodyProperties="@BodyProperties"
														IsFemale="@IsFemale"
														EquipmentCode="@EquipmentCode"
														CharStringId="@CharStringId"
														StanceIndex="@StanceIndex"
														BannerCodeText="@BannerCodeText"
														MountCreationKey="@MountCreationKey"
														ArmorColor1="@ArmorColor1"
														ArmorColor2="@ArmorColor2"
														Race="@Race"

														IdleAction="@IdleAction"
														IdleFaceAnim="@IdleFaceAnim"

														CustomAnimation="@CustomAnimation"
														IsPlayingCustomAnimations="@IsPlayingCustomAnimations"
														ShouldLoopCustomAnimation="@ShouldLoopCustomAnimation"
														CustomAnimationWaitDuration="@CustomAnimationWaitDuration"
														CustomAnimationProgressRatio="@CustomAnimationProgressRatio"

														LeftHandWieldedEquipmentIndex="@LeftHandWieldedEquipmentIndex"
														RightHandWieldedEquipmentIndex="@RightHandWieldedEquipmentIndex"

														CameraFov="@CameraFov"
														CameraZoom="@CameraZoom"
														CameraElevation="@CameraElevation"
														CameraStrafe="@CameraStrafe"
														CameraYaw="@CameraYaw"
														CameraPitch="@CameraPitch"
														CameraRoll="@CameraRoll"
														CameraAnimDuration="@CameraAnimDuration"
														ApplyCameraChange="@ApplyCameraChange"

														EnableLight="@EnableLight"
														CustomRenderScale="@CustomRenderScale"
														IsBannerShownInBackground="true"
														DoNotUseCustomScale="true" />

						<ButtonWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="180" SuggestedHeight="360" HorizontalAlignment="Center" VerticalAlignment="Bottom" Brush="MPLobby.TopHeader.HoverGlow.Centered" MarginBottom="-120" />


						<ButtonWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="180" SuggestedHeight="80" HorizontalAlignment="Center" VerticalAlignment="Bottom" MarginBottom="120" UpdateChildrenStates="true" >
							<Children>
								<BrushWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="200" SuggestedHeight="180" HorizontalAlignment="Center" VerticalAlignment="Center" Brush="Conversation.Gold.Background" Brush.AlphaFactor="1.2" />

								<!-- Character name -->
								<RichTextWidget WidthSizePolicy="Fixed" SuggestedWidth="160" HeightSizePolicy="Fixed" SuggestedHeight="42" HorizontalAlignment="Center" VerticalAlignment="Top" Brush="MPLobby.ClassFilter.ClassTuple.Text" Brush.TextHorizontalAlignment="Center" Brush.TextVerticalAlignment="Center" Brush.FontSize="22" Text="@Name" />
								<!-- Occupation -->
								<RichTextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="42" HorizontalAlignment="Center" VerticalAlignment="Bottom" Brush="MPLobby.ClassFilter.ClassTuple.Text" Brush.TextHorizontalAlignment="Center" Brush.TextVerticalAlignment="Center" Brush.FontSize="26" Text="@Occupation" IsHidden="@Officer" />
								<!-- Officer Icon -->
								<Widget Sprite="SPKingdom\king_seal"
												WidthSizePolicy="Fixed"
												HeightSizePolicy="Fixed"
												SuggestedWidth="48"
												SuggestedHeight="48"
												HorizontalAlignment="Center"
												VerticalAlignment="Bottom"
												IsVisible="@Officer" />
							</Children>
						</ButtonWidget>

					</Children>
				</MultiplayerClassLoadoutTroopSubclassButtonWidget>

				<!-- Edit Button -->
				<ButtonWidget WidthSizePolicy="Fixed"
											HeightSizePolicy="Fixed"
											SuggestedWidth="48"
											SuggestedHeight="48"
											MarginRight="60"
											MarginBottom="84"
											HorizontalAlignment="Center"
											VerticalAlignment="Bottom"
											Brush="MPLobby.Clan.EditInfo.Button"
											DoNotPassEventsToChildren="true"
											Command.Click="EditCharacter"
											IsVisible="@EditMode" />

				<!-- Delete Button -->
				<ButtonWidget WidthSizePolicy="Fixed"
											HeightSizePolicy="Fixed"
											SuggestedWidth="56"
											SuggestedHeight="56"
											MarginLeft="60"
											MarginBottom="80"
											HorizontalAlignment="Center"
											VerticalAlignment="Bottom"
											Brush="Popup.CloseButton"
											DoNotPassEventsToChildren="true"
											Command.Click="DeleteCharacter"
											IsVisible="@EditMode" />

				<!--Perk Selection Extension-->
				<Widget Id="Extension" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="120" ClipContents="true" DoNotAcceptNavigation="true" VerticalAlignment="Bottom" IsVisible="@IsSelected">
					<Children>

						<!--Perks-->
						<MultiplayerPerkContainerPanelWidget Id="PerksPanel" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" PositionXOffset="2" PopupWidgetFirst="..\..\..\..\..\..\FirstPerks" PopupWidgetSecond="..\..\..\..\..\..\SecondPerks" PopupWidgetThird="..\..\..\..\..\..\ThirdPerks" TroopTupleBodyWidget="..\..\CharacterButton" >
							<Children>
								<NavigationScopeTargeter Id="ScopeTargeter" ScopeID="ClassSelectionPerksScope" ScopeParent="..\Perks" ScopeMovements="Horizontal" />
								<NavigatableListPanel Id="Perks" DataSource="{Perks}" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" StackLayout.LayoutMethod="HorizontalLeftToRight">
									<ItemTemplate>
										<MultiplayerPerkItemToggleWidget DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent" SuggestedWidth="160" HorizontalAlignment="Center" MarginLeft="5" Brush="MPClassLoadout.Perks.Button" ContainerPanel="..\..\..\PerksPanel" IconType="@IconType" IconWidget="Icon" IsSelectable="true" UpdateChildrenStates="true">
											<Children>
												<BrushWidget Id="Icon" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="40" SuggestedHeight="40" HorizontalAlignment="Center" MarginTop="18" Brush="MPClassLoadout.Perks.Icon">
													<Children>
														<BrushWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="47" SuggestedHeight="47" HorizontalAlignment="Center" VerticalAlignment="Center" Brush="MPClassLoadout.Perks.Frame" />
													</Children>
												</BrushWidget>
												<TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="25" HorizontalAlignment="Center" VerticalAlignment="Bottom" MarginBottom="8" MarginLeft="5" MarginRight="5" Brush="MPClassLoadout.PerkNameText" Brush.TextVerticalAlignment="Top" Text="@Name" />
											</Children>
										</MultiplayerPerkItemToggleWidget>
									</ItemTemplate>
								</NavigatableListPanel>
							</Children>
						</MultiplayerPerkContainerPanelWidget>

					</Children>
				</Widget>

				<NavigationTargetSwitcher FromTarget="..\." ToTarget="..\CharacterButton" />

			</Children>
		</SiblingOrderWidget>

	</Window>
</Prefab>